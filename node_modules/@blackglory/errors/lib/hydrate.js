import { pass } from '@blackglory/pass';
export function hydrate(err) {
    var _a;
    const errorNames = [err.name, ...err.ancestors]
        .slice(0, -1)
        .reverse();
    let errorConstructor = Error;
    for (const name of errorNames) {
        errorConstructor = createChildErrorConstructor(errorConstructor, name);
    }
    const result = new errorConstructor();
    result.name = err.name;
    result.message = err.message;
    result.stack = (_a = err.stack) !== null && _a !== void 0 ? _a : undefined;
    return result;
}
function createChildErrorConstructor(parentErrorConstructor, name) {
    const constructor = function () { pass(); };
    constructor.prototype = Object.create(parentErrorConstructor.prototype);
    constructor.prototype.constructor = constructor;
    Object.defineProperty(constructor, 'name', { value: name });
    return constructor;
}
//# sourceMappingURL=hydrate.js.map