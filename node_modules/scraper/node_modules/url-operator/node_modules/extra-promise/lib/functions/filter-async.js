import { eachAsync } from "./each-async.js";
import { validateConcurrency } from "../utils/validate-concurrency.js";
import { go } from '@blackglory/go';
export function filterAsync(iterable, fn, concurrency // concurrency must be finite number
) {
    validateConcurrency('concurrency', concurrency);
    return go(async () => {
        const results = [];
        await eachAsync(iterable, async (x, i) => {
            if (await fn(x, i)) {
                results[i] = x;
            }
        }, concurrency);
        // Object.values will drop empty elements: Object.values([1,,,2]) = [1, 2]
        return Object.values(results);
    });
}
//# sourceMappingURL=filter-async.js.map