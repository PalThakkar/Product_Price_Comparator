import { isntUndefined } from 'extra-utils';
export function weakLazy(getter) {
    let ref;
    return function () {
        if (ref) {
            const value = ref.deref();
            if (isntUndefined(value)) {
                return value;
            }
            else {
                return getValue();
            }
        }
        else {
            return getValue();
        }
    };
    function getValue() {
        const value = getter();
        ref = new WeakRef(value);
        return value;
    }
}
//# sourceMappingURL=weak-lazy.js.map