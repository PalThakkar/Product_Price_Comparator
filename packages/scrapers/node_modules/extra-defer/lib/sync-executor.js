export class SyncExecutor {
    constructor({ autoClear = true } = {}) {
        this.callbacks = [];
        this.autoClear = autoClear;
    }
    get size() {
        return this.callbacks.length;
    }
    defer(callback) {
        this.callbacks.push(callback);
    }
    remove(callback) {
        this.callbacks = this.callbacks.filter(x => x !== callback);
    }
    clear() {
        this.callbacks = [];
    }
    execute(...args) {
        const callbacks = this.callbacks;
        if (this.autoClear) {
            this.clear();
        }
        for (const callback of this.iterate(callbacks)) {
            callback(...args);
        }
    }
    executeSettled(...args) {
        const callbacks = this.callbacks;
        if (this.autoClear) {
            this.clear();
        }
        for (const callback of this.iterate(callbacks)) {
            try {
                callback(...args);
            }
            catch (_a) {
            }
        }
    }
}
//# sourceMappingURL=sync-executor.js.map