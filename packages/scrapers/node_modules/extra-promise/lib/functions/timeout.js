import { CustomError } from '@blackglory/errors';
import { setTimeout } from 'extra-timers';
export function timeout(ms, signal) {
    return new Promise((_, reject) => {
        signal === null || signal === void 0 ? void 0 : signal.throwIfAborted();
        const clearTimeout = setTimeout(ms, () => reject(new TimeoutError()));
        signal === null || signal === void 0 ? void 0 : signal.addEventListener('abort', () => {
            clearTimeout();
            reject(signal.reason);
        }, { once: true });
    });
}
export class TimeoutError extends CustomError {
}
//# sourceMappingURL=timeout.js.map