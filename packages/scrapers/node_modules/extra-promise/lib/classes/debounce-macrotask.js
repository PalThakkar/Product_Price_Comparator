import { setImmediate } from 'extra-timers';
export class DebounceMacrotask {
    constructor() {
        this.registry = new Set();
        this.queued = false;
        this.tick = () => {
            for (const fn of this.registry) {
                fn();
            }
            this.registry = new Set();
            this.queued = false;
        };
    }
    queue(fn) {
        this.registry.add(fn);
        if (!this.queued) {
            this.queued = true;
            setImmediate(this.tick);
        }
    }
    cancel(fn) {
        this.registry.delete(fn);
    }
}
//# sourceMappingURL=debounce-macrotask.js.map