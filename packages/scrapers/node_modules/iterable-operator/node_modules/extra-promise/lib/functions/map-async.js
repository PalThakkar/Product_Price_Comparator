import { eachAsync } from './each-async.js';
import { validateConcurrency } from "../utils/validate-concurrency.js";
import { go } from '@blackglory/go';
import { assert } from '@blackglory/errors';
export function mapAsync(iterable, fn, concurrency // concurrency must be finite number
) {
    validateConcurrency('concurrency', concurrency);
    assert(Number.isFinite(concurrency), 'concurrency must be finite number');
    return go(async () => {
        const results = [];
        await eachAsync(iterable, async (x, i) => {
            results[i] = await fn(x, i);
        }, concurrency);
        return results;
    });
}
//# sourceMappingURL=map-async.js.map